"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3501],{2514:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>a});var t=s(5723),r=s(3327);const o={title:"verse"},i="Function: verse()",d={id:"api/verse/functions/verse",title:"verse",description:"verse\\(setup Config;model Verse\\",source:"@site/docs/api/verse/functions/verse.md",sourceDirName:"api/verse/functions",slug:"/api/verse/functions/verse",permalink:"/docs/api/verse/functions/verse",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"verse"},sidebar:"apiSidebar",previous:{title:"ValueObjectType",permalink:"/docs/api/verse/type-aliases/ValueObjectType"}},c={},a=[{value:"Example",id:"example",level:3},{value:"Type Parameters",id:"type-parameters",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Returns",id:"returns",level:2},{value:"Defined in",id:"defined-in",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"function-verse",children:"Function: verse()"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"verse"}),"<",(0,t.jsx)(n.code,{children:"TEntities"}),">(",(0,t.jsx)(n.code,{children:"setup"}),": {",(0,t.jsx)(n.code,{children:"config"}),": ",(0,t.jsx)(n.a,{href:"/docs/api/verse/type-aliases/Config",children:(0,t.jsx)(n.code,{children:"Config"})}),";",(0,t.jsx)(n.code,{children:"model"}),": ",(0,t.jsx)(n.a,{href:"/docs/api/verse/type-aliases/ModelBuilder",children:(0,t.jsx)(n.code,{children:"ModelBuilder"})}),"<",(0,t.jsx)(n.code,{children:"TEntities"}),">; }): ",(0,t.jsx)(n.a,{href:"/docs/api/verse/classes/Verse",children:(0,t.jsx)(n.code,{children:"Verse"})}),"<",(0,t.jsx)(n.code,{children:"TEntities"}),">"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Creates a new top-level Verse instance, which is the API entry point for data access operations."}),"\n",(0,t.jsxs)(n.p,{children:["Initialize the Verse instance with ",(0,t.jsx)(n.a,{href:"/docs/api/verse/type-aliases/Config",children:"Config"})," and ",(0,t.jsx)(n.a,{href:"/docs/api/verse/type-aliases/ModelBuilder",children:"ModelBuilder"})," objects."]}),"\n",(0,t.jsxs)(n.p,{children:["Query and update operations are accessed through the ",(0,t.jsx)(n.a,{href:"/docs/api/verse/classes/Verse#from",children:"Verse.from"})," property and ",(0,t.jsx)(n.a,{href:"/docs/api/verse/classes/Verse#uow",children:"Verse.uow"}),"\nfunction, respectively."]}),"\n",(0,t.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:"showLineNumbers",children:'/// setup-model\nimport { verse } from "@operativa/verse";\nimport { sqlite } from "@operativa/verse-sqlite";\nimport { boolean, entity, int, string } from "@operativa/verse/model/builder";\nimport { PrettyConsoleLogger } from "@operativa/verse/utils/logging";\n\n// Define a simple entity to represent a Todo item.\n\nconst Todo = entity(\n  {\n    id: int(),\n    title: string(),\n    completed: boolean(),\n  },\n  builder => {\n    builder.data(\n      { title: "Do the dishes", completed: false },\n      { title: "Walk the dog", completed: false }\n    );\n  }\n);\n///\n\n/// setup-verse\n// Setup our Verse instance.\n\nconst db = verse({\n  config: {\n    driver: sqlite("todos.sqlite"),\n    logger: new PrettyConsoleLogger(),\n  },\n  model: {\n    entities: {\n      todos: Todo,\n    },\n  },\n});\n///\n\n// Create a clean database schema. In a real app, this would be done using migrations.\n\n/// recreate\nawait db.database.recreate();\n///\n\n// Query all the todos from the database.\n\n/// query-all\nconst todos = await db.from.todos.toArray();\n\ntodos.forEach(todo => {\n  console.log(`${todo.id}: ${todo.title} (completed: ${todo.completed})`);\n});\n///\n\n// Query todos about dogs.\n\n/// query-like\nconst query = db.from.todos.where(todo => todo.title.like("%dog%"));\n\nfor await (const todo of query) {\n  console.log(`${todo.id}: ${todo.title} (completed: ${todo.completed})`);\n}\n///\n\n/// update\n// Modify a todo and save the changes.\n\nconst uow = db.uow();\n\nconst todo = await uow.todos\n  .where(todo => todo.title === "Do the dishes")\n  .single();\n\ntodo.completed = true;\n\nawait uow.commit();\n///\n\n// Now we can remove the todo from the database.\n\nuow.todos.remove(todo);\n\nawait uow.commit();\n'})}),"\n",(0,t.jsx)(n.h2,{id:"type-parameters",children:"Type Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsx)(n.tr,{children:(0,t.jsx)(n.th,{children:"Type Parameter"})})}),(0,t.jsx)(n.tbody,{children:(0,t.jsx)(n.tr,{children:(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"TEntities"})," ",(0,t.jsx)(n.em,{children:"extends"})," ",(0,t.jsx)(n.a,{href:"/docs/api/verse/type-aliases/Entities",children:(0,t.jsx)(n.code,{children:"Entities"})})]})})})]}),"\n",(0,t.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"setup"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"object"})}),(0,t.jsx)(n.td,{children:"The config and model initialization for this Verse instance."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"setup.config"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"/docs/api/verse/type-aliases/Config",children:(0,t.jsx)(n.code,{children:"Config"})})}),(0,t.jsx)(n.td,{children:"The config object."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"setup.model"})}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.a,{href:"/docs/api/verse/type-aliases/ModelBuilder",children:(0,t.jsx)(n.code,{children:"ModelBuilder"})}),"<",(0,t.jsx)(n.code,{children:"TEntities"}),">"]}),(0,t.jsx)(n.td,{children:"The model initialization object."})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"returns",children:"Returns"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/docs/api/verse/classes/Verse",children:(0,t.jsx)(n.code,{children:"Verse"})}),"<",(0,t.jsx)(n.code,{children:"TEntities"}),">"]}),"\n",(0,t.jsx)(n.p,{children:"The new instance of Verse."}),"\n",(0,t.jsx)(n.h2,{id:"defined-in",children:"Defined in"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/operativa-dev/verse/blob/afd181c927e47fdeff512ae41818fb33ecad359a/packages/verse-core/src/verse.ts#L529",children:"packages/verse-core/src/verse.ts:529"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},3327:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var t=s(2155);const r={},o=t.createContext(r);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);