<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ref/Configuration/entities" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Entities | Verse ORM</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://verse.operativa.dev/img/icon.png"><meta data-rh="true" name="twitter:image" content="https://verse.operativa.dev/img/icon.png"><meta data-rh="true" property="og:url" content="https://verse.operativa.dev/docs/ref/Configuration/entities"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Entities | Verse ORM"><meta data-rh="true" name="description" content="Entities are the primary building blocks of a model, and correspond to the core concepts in your application domain,"><meta data-rh="true" property="og:description" content="Entities are the primary building blocks of a model, and correspond to the core concepts in your application domain,"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://verse.operativa.dev/docs/ref/Configuration/entities"><link data-rh="true" rel="alternate" href="https://verse.operativa.dev/docs/ref/Configuration/entities" hreflang="en"><link data-rh="true" rel="alternate" href="https://verse.operativa.dev/docs/ref/Configuration/entities" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WG75CT3N",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.6d8e3936.css">
<script src="/assets/js/runtime~main.abb431c4.js" defer="defer"></script>
<script src="/assets/js/main.81dc4756.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WG75CT3N" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_YZiG" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/icon.svg" alt="Operativa Logo" class="themedComponent_XuIA themedComponent--light_Sq8U" height="32" width="32"><img src="/img/icon_dark.svg" alt="Operativa Logo" class="themedComponent_XuIA themedComponent--dark_wAvx" height="32" width="32"></div><b class="navbar__title text--truncate">Verse ORM</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/ref/installation">Reference</a><a class="navbar__item navbar__link" href="/docs/api/">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/operativa-dev/verse" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_WLxH"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_lvDA colorModeToggle_cCLC"><button class="clean-btn toggleButton_RxXu toggleButtonDisabled_W6Qw" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_D0xI"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_UCne"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_QXrr"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IXs7"><div class="docsWrapper_oUDd"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_cWYH" type="button"></button><div class="docRoot_VKZz"><aside class="theme-doc-sidebar-container docSidebarContainer_AjpR"><div class="sidebarViewport_cTaq"><div class="sidebar_oLRA"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Sths"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ref/installation">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ref/Tutorials/getting-started">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/ref/Configuration/overview">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ref/Configuration/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ref/Configuration/entities">Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ref/Configuration/properties">Properties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ref/Configuration/value-objects">Value Objects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/ref/Configuration/Conventions/overview">Conventions</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ref/Querying/overview">Querying</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ref/Updating/intro">Updating</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ref/cli">Verse CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ref/drivers">Database Drivers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/ref/domain-language">Domain Language</a></li></ul></nav></div></div></aside><main class="docMainContainer_Waxb"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_SGUV"><div class="docItemContainer_ql1L"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_amby" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_wYX9"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Configuration</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Entities</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_mTEo theme-doc-toc-mobile tocMobile_NTlh"><button type="button" class="clean-btn tocCollapsibleButton_LJuZ">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Entities</h1>
<p>Entities are the primary building blocks of a model, and correspond to the core concepts in your application domain,
such as users, products, orders, etc. Entities have identity, and are uniquely identifiable by their primary key. They
are made up of fields, which represent the properties of the entity, and relationships, which represent the associations
between entities.</p>
<p>In Verse, entity models are created using the <a href="/docs/api/model/builder/functions/entity"><code>entity</code></a> configuration function,
which is used, along with other configuration functions, to define a complete entity model. The following example
demonstrates how to define a simple entity model for a user:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once created, we can add it to the model by simply adding it to the <code>entities</code> object in the model configuration:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> db </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">verse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  model</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    entities</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">      users</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> User</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition__TsG alert alert--secondary"><div class="admonitionHeading_Ui5g"><span class="admonitionIcon_RhV9"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_b62_"><p>We could have just as easily defined the entity directly in the model configuration, but it&#x27;s often better to
define it separately, especially when the model is large or the entity is involved in relationships.</p></div></div>
<p>Observe that when we add an entity to the model, we associate it with a <code>label</code>, in this case <code>users</code>. This label is used
to refer to the entity when we are doing things like querying data.</p>
<p>E.g. it lets us write queries like <code>db.from.users.where(u =&gt; u.name === &#x27;Alice&#x27;)</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="objects-vs-classes">Objects vs. Classes<a href="#objects-vs-classes" class="hash-link" aria-label="Direct link to Objects vs. Classes" title="Direct link to Objects vs. Classes">​</a></h2>
<p>At runtime, Verse entities can either be plain objects or class instances. By default, entities are plain objects, but
you can also use classes to represent entities. This can be useful when you want to add methods to your entities, or when
you want to use inheritance to define common behavior.</p>
<p>To use a a class to define an entity, you can simply pass the class constructor to the <code>entity</code> function:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, we define a <code>User</code> class with a constructor that takes the properties of the entity as arguments. We then
pass the class constructor to the <code>entity</code> function, along with the configuration object that defines the properties of
the entity.</p>
<div class="theme-admonition theme-admonition-note admonition__TsG alert alert--secondary"><div class="admonitionHeading_Ui5g"><span class="admonitionIcon_RhV9"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_b62_"><p>All configuration APIs that accept entity types can also accept class constructors.</p></div></div>
<p>Whether or not you use classes to define entities is largely a matter of personal preference, but there are some things
that you can do with classes that you can&#x27;t do with plain objects:</p>
<ul>
<li>Use inheritance to define common behavior.</li>
<li>Create entities with stricter APIs. e.g. by making properties read-only.</li>
<li>Use <em>shadow properties</em> to represent properties that are not present in the class definition.</li>
<li>Easily create circular references between entities.</li>
<li>Perform in-line model configuration.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="entity-types">Entity Types<a href="#entity-types" class="hash-link" aria-label="Direct link to Entity Types" title="Direct link to Entity Types">​</a></h2>
<p>When using plain objects to define entities, we would like a type that represents the shape of the entity. Verse
provides a utility type, <a href="/docs/api/verse/type-aliases/EntityType"><code>EntityType</code></a>, that generates a type for an
entity. This type can be used to type-check entities and queries, and to provide additional tooling support.</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">UserType</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> EntityType</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">entities</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">users</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="circular-references">Circular References<a href="#circular-references" class="hash-link" aria-label="Direct link to Circular References" title="Direct link to Circular References">​</a></h2>
<p>Entities can have relationships with other entities, and these relationships can form a graph of entities that reference
each other. This is known as a <em>circular reference</em>, and can be useful for representing complex relationships between
entities. When using class-based entities, this is not a problem, as classes can reference each other directly. However,
when using plain objects, we need to use a different approach to handle circular references, because TypeScript does not
perform type-inference for types containing circular references.</p>
<p>The pattern we need to use looks like this:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">PostType</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  userId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  posts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">many</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">PostType</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Post&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  userId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">one</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> db </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">verse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  model</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    entities</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">      users</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> User</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">      posts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Post</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can see that the main difference is that we have had to explicitly define the type of the <code>Post</code> entity, and then
pass it to the <code>many</code> function when defining the <code>posts</code> navigation property on the <code>User</code> entity. Additionally, we
have had to pass the name of the <code>Post</code> entity to the <code>many</code> function, so that Verse can resolve the entity that the
navigation is referencing. The name of an entity is just the singularized, pascal-cased version of the entity label,
and is used internally by Verse to identify entities.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties">​</a></h2>
<p>As shown above, properties are specified by passing a configuration object to the <code>entity</code> function. The configuration
object keys are the names of the properties, and the values are calls to type-specific configuration functions. In this
case, we used the <a href="/docs/api/model/builder/functions/int"><code>int</code></a> and <a href="/docs/api/model/builder/functions/string"><code>string</code></a>
functions to define the <code>id</code>, <code>name</code>, and <code>email</code> properties. There are also configuration functions for defining
other types of properties, such as <code>boolean</code>, <code>date</code> and <code>number</code>.</p>
<p>These scalar property configuration functions are also used to define how the property behaves and how it should be
mapped to the database.</p>
<p>For example we can can override the default column name for a property:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> column</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user_id&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or set the maximum length of a string property:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> maxLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="shadow-properties">Shadow Properties<a href="#shadow-properties" class="hash-link" aria-label="Direct link to Shadow Properties" title="Direct link to Shadow Properties">​</a></h2>
<p>When using class-based entities, we can define <em>shadow properties</em> on the entity to represent properties that are not
present in the class definition, but are used by the entity model. Shadow properties are useful for things like
optimistic concurrency control, where we need to store a version number for the entity, but don&#x27;t want to expose it
as a property on the class.</p>
<p>For example, we can define a shadow property for the <code>User</code> entity to represent the version number:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  User</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">concurrency</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;version&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Verse will treat the <code>version</code> property just like any other property, but it will not be present in the type of the
entity, and so will not be visible to consumers of the entity.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="navigations">Navigations<a href="#navigations" class="hash-link" aria-label="Direct link to Navigations" title="Direct link to Navigations">​</a></h2>
<p>Navigations are entity properties that reference other entities. They are used to represent relationships between
entities so that we can enjoy a rich and natural programming model that reflects the data structure of our application domain.
Specifically, they allow us to do things like: eager load related data, query across relations without the need for manual joins,
and update aggregate roots with their children in a single transaction.</p>
<p>For example, a <code>User</code> entity might have a <code>posts</code> navigation property that references a collection of <code>Post</code>
entities that the user has created.</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  content</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  posts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">many</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Post</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We use the <a href="/docs/api/model/builder/functions/many"><code>many</code></a> function to define a navigation property that references a
collection of entities. We can also use the <a href="/docs/api/model/builder/functions/one"><code>one</code></a> function to define a navigation
property that references a single entity.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="key">Key<a href="#key" class="hash-link" aria-label="Direct link to Key" title="Direct link to Key">​</a></h2>
<p>Entities have a primary key, which is a unique identifier for the entity. By default, Verse tries to infer the primary
key based on the properties of the entity using <a href="/docs/ref/Configuration/Conventions/overview">conventions</a>. However, you can, of course,
explicitly specify the primary key using configuration:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">key</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, we explicitly specify that the <code>id</code> property is the primary key of the entity by calling the <code>key</code> method
on an entity configuration builder object. We pass a function that takes the entity configuration builder as the second
argument to the <code>entity</code> function.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="foreign-keys">Foreign Keys<a href="#foreign-keys" class="hash-link" aria-label="Direct link to Foreign Keys" title="Direct link to Foreign Keys">​</a></h2>
<p>Foreign keys are used to define relationships between entities at the database level, and underpin things like navigations
and cascading updates. In Verse, foreign keys are defined using the <code>references</code> method on the entity configuration builder:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    userId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">references</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Observe that, in this case, we don&#x27;t need to specify the column name for the foreign key property, as Verse will infer it
using conventions. However, we can override the default behavior by specifying the column name explicitly:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Post </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    userFk</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">references</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;userFk&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, the foreign key property is named <code>userFk</code>, and so will not be automatically inferred by Verse. We need to specify
the column name explicitly when calling the <code>references</code> method.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="table">Table<a href="#table" class="hash-link" aria-label="Direct link to Table" title="Direct link to Table">​</a></h2>
<p>We can also specify the table name for an entity, using the same fluent configuration builder function:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;users&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition__TsG alert alert--secondary"><div class="admonitionHeading_Ui5g"><span class="admonitionIcon_RhV9"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_b62_"><p>In Verse, explicit configuration is often not necessary, as the framework can infer most of the configuration from
conventions. However, explicit configuration can be useful when you need to override the default behavior.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="concurrency">Concurrency<a href="#concurrency" class="hash-link" aria-label="Direct link to Concurrency" title="Direct link to Concurrency">​</a></h2>
<p>Entities can also have a concurrency property, which is used to implement <em>optimistic concurrency</em> control. This is a
mechanism to prevent lost updates in a multi-user environment. When an entity has a concurrency property, Verse will
automatically include it in the <code>WHERE</code> clause of <code>UPDATE</code> and <code>DELETE</code> statements, and check that the value has not
changed since the entity was last read.</p>
<p>To specify a concurrency property, we can use the <code>concurrency</code> method on the entity configuration builder:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    token</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">concurrency</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, we specify that the <code>token</code> property is the concurrency property for the entity. The <code>version</code> option is used to
specify that we are using the <em>version</em> strategy for concurrency control. This means that the property is expected to
be a monotonically increasing value, and will be incremented by one each time the entity is updated. Verse will
manage this for us automatically.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="conditions">Conditions<a href="#conditions" class="hash-link" aria-label="Direct link to Conditions" title="Direct link to Conditions">​</a></h2>
<p>Entities can also have conditions, which are filters that are automatically applied to any queries for that entity.
Conditions are specified using the <code>condition</code> method on the entity configuration builder:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    deleted</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">boolean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">condition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">deleted</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Conditions are useful for implementing cross-cutting concerns, such as soft deletes, where entities are not actually
deleted from the database, but are instead marked as deleted by setting a <code>deleted</code> flag to <code>true</code>. By adding a
condition to the entity, we can ensure that developers do not have to remember to filter out deleted entities in their
queries.</p>
<h2 class="anchor anchorWithStickyNavbar_EUnj" id="seed-data">Seed Data<a href="#seed-data" class="hash-link" aria-label="Direct link to Seed Data" title="Direct link to Seed Data">​</a></h2>
<p>Entities can also have seed data, which is initial data, defined at the model level. Verse will automatically insert
this data into the database when the database is created. Seed data is specified using the <code>data</code> method on the entity
configuration builder:</p>
<div class="language-ts codeBlockContainer_nEx1 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D_tI"><pre tabindex="0" class="prism-code language-ts codeBlock_RAna thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ZMG8 codeBlockLinesWithNumbering_Rxbz"><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> User </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">entity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">  e </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;John&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;john@example.com&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Jane&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;jane@example.com&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_OgSw" style="color:#393A34"><span class="codeLineNumber_c9cX"></span><span class="codeLineContent_kg9j"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span><br></span></code></pre><div class="buttonGroup_qbMD"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_xxZ1" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_L7U7"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_sohI"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Seed data is useful for populating the database with initial data, such as reference data, that is required for the
application to function correctly. It can also be used for testing purposes, to ensure that the database is in a known
state before running tests.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/operativa-dev/verse/edit/main/apps/docs" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dTFU" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_OOeN"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/ref/Configuration/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/ref/Configuration/properties"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Properties</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_iwI9 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objects-vs-classes" class="table-of-contents__link toc-highlight">Objects vs. Classes</a></li><li><a href="#entity-types" class="table-of-contents__link toc-highlight">Entity Types</a></li><li><a href="#circular-references" class="table-of-contents__link toc-highlight">Circular References</a></li><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#shadow-properties" class="table-of-contents__link toc-highlight">Shadow Properties</a></li><li><a href="#navigations" class="table-of-contents__link toc-highlight">Navigations</a></li><li><a href="#key" class="table-of-contents__link toc-highlight">Key</a></li><li><a href="#foreign-keys" class="table-of-contents__link toc-highlight">Foreign Keys</a></li><li><a href="#table" class="table-of-contents__link toc-highlight">Table</a></li><li><a href="#concurrency" class="table-of-contents__link toc-highlight">Concurrency</a></li><li><a href="#conditions" class="table-of-contents__link toc-highlight">Conditions</a></li><li><a href="#seed-data" class="table-of-contents__link toc-highlight">Seed Data</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Operativa Solutions (PTY) LTD.</div></div></div></footer></div>
</body>
</html>