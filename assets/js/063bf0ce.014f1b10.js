"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3700],{6203:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>s,metadata:()=>o,toc:()=>p});var n=r(3159),a=r(8740);const s={},i="Parameters",o={id:"ref/Querying/parameters",title:"Parameters",description:"Queries often need to be parameterized based on user input and Verse provides a simple, intuitive and type-safe way",source:"@site/docs/ref/03-Querying/02-parameters.mdx",sourceDirName:"ref/03-Querying",slug:"/ref/Querying/parameters",permalink:"/docs/ref/Querying/parameters",draft:!1,unlisted:!1,editUrl:"https://github.com/operativa-dev/verse/edit/main/apps/docs",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"refSidebar",previous:{title:"Operators",permalink:"/docs/ref/Querying/operators"},next:{title:"Introduction",permalink:"/docs/ref/Updating/intro"}},d={},p=[];function u(e){const t={admonition:"admonition",code:"code",em:"em",h1:"h1",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"parameters",children:"Parameters"}),"\n",(0,n.jsx)(t.p,{children:"Queries often need to be parameterized based on user input and Verse provides a simple, intuitive and type-safe way\nto do this, building upon our use of arrow function expressions in query operators."}),"\n",(0,n.jsx)(t.p,{children:"Put simply, any query operator that takes an arrow function expression can also take parameters. These parameters are\ndefined as additional arguments to the arrow function expression, and are used in the same way as any other argument.\nParameter values are passed to the query operator after the arrow function expression."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-ts",metastring:"include ./apps/snippets/src/query.ts:parameterized showLineNumbers",children:'const artist = "Audioslave"; // usually from user input\n\nconst parameterized = await db.from.artists\n  .where((a, $artist) => a.name === $artist, artist)\n  .single();\n'})}),"\n",(0,n.jsxs)(t.p,{children:["In the example above, the ",(0,n.jsx)(t.code,{children:"where"})," operator takes an arrow function expression with an additional parameter ",(0,n.jsx)(t.code,{children:"$artist"}),".\nA value for this parameter is then passed to the query operator as the second argument, after the arrow function expression.\nThis pattern should be familiar to anyone who has used a printf-style format function in other languages."]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"$"})," prefix on the parameter name is not required, but is a common convention to make it clear that the value is a parameter."]})}),"\n",(0,n.jsx)(t.p,{children:"When a query takes parameters, Verse will create SQL query parameters to ensure that the parameter values are correctly\nescaped and quoted, and to prevent SQL injection attacks. Additionally, Verse will used prepared statements when available\nto ensure that the query can be efficiently executed multiple times with different parameter values."}),"\n",(0,n.jsxs)(t.p,{children:["Verse offers a second way to pass parameters to a query, ",(0,n.jsx)(t.em,{children:"Compiled Queries"}),", which we will cover in a later section."]})]})}function c(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},8740:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>o});var n=r(1855);const a={},s=n.createContext(a);function i(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);